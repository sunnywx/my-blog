{"version":3,"sources":["webpack:///./routes/tags/index.scss","webpack:///./routes/tags/index.tsx"],"names":["Tags","name","useState","tags","setTags","curTags","setCurTags","useEffect","document","title","fetch","then","res","json","length","map","u","t","key","href","className","style","Object","entries","sort","v1","items","onClick","route"],"mappings":"4lCACe,EAAQ,cC4ERA,UA5Df,SAAc,GAAe,IAAdC,EAAI,EAAJA,KACsC,IAA3BC,YAAwB,CAAC,GAAE,GAA5CC,EAAI,KAAEC,EAAO,KAC8B,IAApBF,YAAiB,IAAG,GAA3CG,EAAO,KAAEC,EAAU,KAoB1B,OAlBAC,aAAU,WACRC,SAASC,MAAQ,kBACnB,GAAG,IAEHF,aAAU,WACRG,MAAM,cACHC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,MAAM,IACtBF,MAAK,SAAAR,GACJC,EAAQD,EACV,GACJ,GAAG,IAEHI,aAAU,WACLN,GACDK,EAAWH,EAAKF,IAAS,GAE7B,GAAG,CAACE,EAAMF,IAEPA,EAEC,uBACE,sBAAc,MAATA,EAAe,MAAQA,EAAI,IAAE,4BAAQI,EAAQS,OAAM,MACxD,sBACIT,EAAmBU,KAAI,YAAW,IAATC,EAAC,EAADA,EAAGC,EAAC,EAADA,EAC5B,OACE,kBAAIC,IAAKF,GAAG,iBAAGG,KAAMH,GAAIC,GAE7B,MAON,mBAAKG,UAAWC,GACbC,OAAOC,QAAQpB,GAAQ,CAAC,GAAGqB,MAAK,kBAAIC,EAAJ,OAAM,YAAQ,OAAMA,EAAGX,OAAT,KAAqBA,OAAS,GAAK,CAAC,IAChFC,KAAI,YAAkB,aAAhBG,EAAG,KAAEQ,EAAK,KACf,GAAoB,IAAjBA,EAAMZ,OAET,OACE,mBAAKI,IAAKA,EAAKS,QAAS,kBAAKC,gBAAM,SAAD,OAAUV,GAAM,GAChD,sBAAa,MAARA,EAAc,MAAQA,EAAG,IAAE,4BAAQQ,EAAMZ,OAAM,MACpD,sBACGY,EAAMX,KAAI,YAAW,IAATC,EAAC,EAADA,EAAGC,EAAC,EAADA,EACd,OACE,kBAAIC,IAAKF,GAAG,iBAAGG,KAAMH,GAAIC,GAE7B,KAIR,IAGR,C","file":"route-tags.chunk.17649.js","sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"wrap\":\"wrap__k69Bu\"};","import {h} from 'preact'\nimport {useEffect, useState} from \"preact/hooks\";\nimport {route} from \"preact-router\";\n\nimport style from './index.scss'\n\ntype Props = {\n  className?: string;\n  name?: string;\n}\n\ntype TVal={u: string, t: string}\n\ntype TTag={\n  [key: string]: Array<TVal>\n}\n\nfunction Tags({name}: Props) {\n  const [tags, setTags] = useState<TTag | TVal[]>({})\n  const [curTags, setCurTags] = useState<TVal[]>([])\n\n  useEffect(()=> {\n    document.title = 'Tags | sunnywang'\n  }, [])\n\n  useEffect(() => {\n    fetch('/tags.json')\n      .then(res => res.json())\n      .then(tags => {\n        setTags(tags)\n      })\n  }, [])\n\n  useEffect(()=> {\n    if(name) {\n      setCurTags(tags[name] || [])\n    }\n  }, [tags, name])\n\n  if(name){\n    return (\n      <div>\n        <h2>{name === '_' ? '未分类' : name} <span>({curTags.length})</span></h2>\n        <ul>\n          {(curTags as TVal[]).map(({u, t})=> {\n            return (\n              <li key={u}><a href={u}>{t}</a></li>\n            )\n          })}\n        </ul>\n      </div>\n    )\n  }\n\n  return (\n    <div className={style.wrap}>\n      {Object.entries(tags || {}).sort(([, v1], [, v2]) => v1.length < v2.length ? 1 : -1)\n        .map(([key, items]) => {\n          if(items.length === 0) return;\n\n          return (\n            <div key={key} onClick={()=> route(`/tags/${key}`)}>\n              <h2>{key === '_' ? '未分类' : key} <span>({items.length})</span></h2>\n              <ul>\n                {items.map(({u, t})=> {\n                  return (\n                    <li key={u}><a href={u}>{t}</a></li>\n                  )\n                })}\n              </ul>\n            </div>\n          )\n        })}\n    </div>\n  );\n}\n\nexport default Tags;"],"sourceRoot":""}