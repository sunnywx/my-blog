{"version":3,"sources":["webpack:///./routes/tags/index.scss","webpack:///./routes/tags/index.tsx"],"names":["Tags","name","tags","setTags","useState","curTags","setCurTags","useEffect","document","title","fetch","then","res","json","length","map","u","t","key","href","className","style","Object","entries","sort","v1","v2","items","onClick","route"],"mappings":"4IACe,EAAQ,cC4ERA,UA5Df,UAAc,KAACC,IACb,MAAOC,EAAMC,GAAWC,YAAwB,CAAC,IAC1CC,EAASC,GAAcF,YAAiB,IAoB/C,OAlBAG,aAAU,KACRC,SAASC,MAAQ,kBAAkB,GAClC,IAEHF,aAAU,KACRG,MAAM,cACHC,MAAKC,GAAOA,EAAIC,SAChBF,MAAKT,IACJC,EAAQD,EAAK,GACb,GACH,IAEHK,aAAU,KACLN,GACDK,EAAWJ,EAAKD,IAAS,GAC3B,GACC,CAACC,EAAMD,IAEPA,EAEC,uBACE,sBAAc,MAATA,EAAe,MAAQA,EAAI,IAAE,4BAAQI,EAAQS,OAAM,MACxD,sBACIT,EAAmBU,KAAI,EAAEC,IAAGC,OAE1B,kBAAIC,IAAKF,GAAG,iBAAGG,KAAMH,GAAIC,QASnC,mBAAKG,UAAWC,GACbC,OAAOC,QAAQrB,GAAQ,CAAC,GAAGsB,MAAK,EAAE,CAAEC,IAAM,CAAEC,KAAQD,EAAGX,OAASY,EAAGZ,OAAS,GAAK,IAC/EC,KAAI,EAAEG,EAAKS,MACV,GAAoB,IAAjBA,EAAMb,OAET,OACE,mBAAKI,IAAKA,EAAKU,QAAS,IAAKC,gBAAO,SAAQX,MAC1C,sBAAa,MAARA,EAAc,MAAQA,EAAG,IAAE,4BAAQS,EAAMb,OAAM,MACpD,sBACGa,EAAMZ,KAAI,EAAEC,IAAGC,OAEZ,kBAAIC,IAAKF,GAAG,iBAAGG,KAAMH,GAAIC,OAI3B,IAKlB,C","file":"route-tags.chunk.b2379.esm.js","sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"wrap\":\"wrap__k69Bu\"};","import {h} from 'preact'\nimport {useEffect, useState} from \"preact/hooks\";\nimport {route} from \"preact-router\";\n\nimport style from './index.scss'\n\ntype Props = {\n  className?: string;\n  name?: string;\n}\n\ntype TVal={u: string, t: string}\n\ntype TTag={\n  [key: string]: Array<TVal>\n}\n\nfunction Tags({name}: Props) {\n  const [tags, setTags] = useState<TTag | TVal[]>({})\n  const [curTags, setCurTags] = useState<TVal[]>([])\n\n  useEffect(()=> {\n    document.title = 'Tags | sunnywang'\n  }, [])\n\n  useEffect(() => {\n    fetch('/tags.json')\n      .then(res => res.json())\n      .then(tags => {\n        setTags(tags)\n      })\n  }, [])\n\n  useEffect(()=> {\n    if(name) {\n      setCurTags(tags[name] || [])\n    }\n  }, [tags, name])\n\n  if(name){\n    return (\n      <div>\n        <h2>{name === '_' ? '未分类' : name} <span>({curTags.length})</span></h2>\n        <ul>\n          {(curTags as TVal[]).map(({u, t})=> {\n            return (\n              <li key={u}><a href={u}>{t}</a></li>\n            )\n          })}\n        </ul>\n      </div>\n    )\n  }\n\n  return (\n    <div className={style.wrap}>\n      {Object.entries(tags || {}).sort(([, v1], [, v2]) => v1.length < v2.length ? 1 : -1)\n        .map(([key, items]) => {\n          if(items.length === 0) return;\n\n          return (\n            <div key={key} onClick={()=> route(`/tags/${key}`)}>\n              <h2>{key === '_' ? '未分类' : key} <span>({items.length})</span></h2>\n              <ul>\n                {items.map(({u, t})=> {\n                  return (\n                    <li key={u}><a href={u}>{t}</a></li>\n                  )\n                })}\n              </ul>\n            </div>\n          )\n        })}\n    </div>\n  );\n}\n\nexport default Tags;"],"sourceRoot":""}