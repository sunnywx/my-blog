<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>Thinking in X | sunnywang's blog</title><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><link rel="apple-touch-icon" href="/assets/icons/apple-touch-icon.png"><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#673ab8"><link rel="shortcut icon" href="/favicon.ico"><style>html{-webkit-text-size-adjust:100%;line-height:1.15}body{margin:0}h1{font-size:2em;margin:.67em 0}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}code{font-family:monospace,monospace;font-size:1em}img{border-style:none}:root{--font-size-base:1rem;--font-size-x2:1.25rem;--header-height:56px;--shrink-header-height:112px;--bg-light:#fff;--color-light:#000;--bg-dark:#222427;--color-dark:#fff;--hl:rgba(192,164,243,0.5)}body,html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background:#fff;font-family:Roboto Light,arial,sans-serif;font-weight:400;height:100%;margin:0;overflow:hidden;padding:0;width:100%}*{box-sizing:border-box}p{line-height:1.5}.main{display:-ms-flexbox;display:flex;height:calc(100% - var(--header-height));position:relative;top:56px}@media (max-width:600px){.main{height:calc(100% - var(--shrink-header-height));top:var(--shrink-header-height)}}.main>div:last-child{-ms-flex:1;flex:1;overflow:auto;padding:1rem}.main>div:last-child pre{background:#1f1f34;border:1px solid #3f4757;border-radius:6px;color:wheat;max-height:600px;overflow:auto;padding:1rem}.main>div:last-child img{width:100%}code[class*=language-]{word-wrap:normal;background:none;color:#fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-o-tab-size:4;tab-size:4;text-align:left;text-shadow:0 -.1em .2em #000;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-]::selection,code[class*=language-] ::selection{background:hsla(0,0%,93%,.15);text-shadow:none}.header__DTK6R{-ms-flex-pack:justify;background:#fff;box-shadow:0 0 5px rgba(0,0,0,.5);-ms-flex-wrap:wrap;flex-wrap:wrap;justify-content:space-between;left:0;min-height:56px;padding:0;position:fixed;top:0;width:100%;z-index:50}.header__DTK6R,.header__DTK6R>div:first-child{-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex}.header__DTK6R>div:first-child{margin-left:10px}.header__DTK6R>div:first-child>h1{cursor:pointer}.header__DTK6R>div:first-child>span{-ms-flex-pack:center;-ms-flex-align:center;align-items:center;border-radius:50%;cursor:pointer;display:-ms-inline-flexbox;display:inline-flex;font-size:16px;height:36px;justify-content:center;opacity:.5;width:36px}.header__DTK6R>div:first-child>span:hover{background:#d3d3d3}.header__DTK6R h1{float:left;font-size:24px;font-weight:400;line-height:56px;margin:0;padding:0 8px}.header__DTK6R nav{-ms-flex-align:center;-ms-flex-pack:justify;align-items:center;display:-ms-flexbox;display:flex;justify-content:space-between;margin-right:1rem}@media (max-width:600px){.header__DTK6R nav{width:100%}}.header__DTK6R nav a{display:inline-block;height:56px;line-height:56px;min-width:50px;padding:0 15px;text-align:center;text-decoration:none;will-change:background-color}.header__DTK6R nav a:active,.header__DTK6R nav a:hover{border-bottom:2px solid rgba(0,0,0,.4)}.header__DTK6R nav .icon__ftgq-{-ms-flex-align:center;align-items:center;color:#a9a9a9;cursor:pointer;display:-ms-inline-flexbox;display:inline-flex;font-size:20px;min-width:unset;padding:0;text-decoration:none}.header__DTK6R nav .icon__ftgq-:last-child{margin-left:20px}.header__DTK6R nav .icon__ftgq-:hover{border:none;color:#000}.nav__-dEyW{background:#e6e6e6;overflow:auto;padding:10px;transition:all .5s ease;width:30ch;z-index:20}@media (max-width:600px){.nav__-dEyW{height:calc(100% - var(--shrink-header-height));position:fixed}}.wrap__VyOVO{padding:1rem;position:relative}.wrap__VyOVO>.pager__T39MM{-ms-flex-pack:distribute;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:1rem;justify-content:space-around}</style><link href="/bundle.f9bc4.css" rel="stylesheet" media="only x" onload="this.media='all'"><noscript><link rel="stylesheet" href="/bundle.f9bc4.css"></noscript></head><body><header class="header__DTK6R"><div><span id="toggle-side-nav"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M16 5H0V4h16v1zm0 8H0v-1h16v1zm0-4.008H0V8h16v.992z"></path></svg></span><h1>Thinking in X</h1></div><nav><div><a href="/blogs" class="">Blogs</a><a href="/tags" class="">Tags</a><a href="/about" class="">About</a></div><div><span class="icon__ftgq-"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1zm0 13V2a6 6 0 1 1 0 12z"></path></svg></span><a href="https://github.com/sunnywx" target="_blank" rel="noreferrer" class="icon__ftgq-"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm3.163 21.783h-.093a.513.513 0 0 1-.382-.14.513.513 0 0 1-.14-.372v-1.406c.006-.467.01-.94.01-1.416a3.693 3.693 0 0 0-.151-1.028 1.832 1.832 0 0 0-.542-.875 8.014 8.014 0 0 0 2.038-.471 4.051 4.051 0 0 0 1.466-.964c.407-.427.71-.943.885-1.506a6.77 6.77 0 0 0 .3-2.13 4.138 4.138 0 0 0-.26-1.476 3.892 3.892 0 0 0-.795-1.284 2.81 2.81 0 0 0 .162-.582c.033-.2.05-.402.05-.604 0-.26-.03-.52-.09-.773a5.309 5.309 0 0 0-.221-.763.293.293 0 0 0-.111-.02h-.11c-.23.002-.456.04-.674.111a5.34 5.34 0 0 0-.703.26 6.503 6.503 0 0 0-.661.343c-.215.127-.405.249-.573.362a9.578 9.578 0 0 0-5.143 0 13.507 13.507 0 0 0-.572-.362 6.022 6.022 0 0 0-.672-.342 4.516 4.516 0 0 0-.705-.261 2.203 2.203 0 0 0-.662-.111h-.11a.29.29 0 0 0-.11.02 5.844 5.844 0 0 0-.23.763c-.054.254-.08.513-.081.773 0 .202.017.404.051.604.033.199.086.394.16.582A3.888 3.888 0 0 0 5.702 10a4.142 4.142 0 0 0-.263 1.476 6.871 6.871 0 0 0 .292 2.12c.181.563.483 1.08.884 1.516.415.422.915.75 1.466.964.653.25 1.337.41 2.033.476a1.828 1.828 0 0 0-.452.633 2.99 2.99 0 0 0-.2.744 2.754 2.754 0 0 1-1.175.27 1.788 1.788 0 0 1-1.065-.3 2.904 2.904 0 0 1-.752-.824 3.1 3.1 0 0 0-.292-.382 2.693 2.693 0 0 0-.372-.343 1.841 1.841 0 0 0-.432-.24 1.2 1.2 0 0 0-.481-.101c-.04.001-.08.005-.12.01a.649.649 0 0 0-.162.02.408.408 0 0 0-.13.06.116.116 0 0 0-.06.1.33.33 0 0 0 .14.242c.093.074.17.131.232.171l.03.021c.133.103.261.214.382.333.112.098.213.209.3.33.09.119.168.246.231.381.073.134.15.288.231.463.188.474.522.875.954 1.145.453.243.961.364 1.476.351.174 0 .349-.01.522-.03.172-.028.343-.057.515-.091v1.743a.5.5 0 0 1-.533.521h-.062a10.286 10.286 0 1 1 6.324 0v.005z"></path></svg></a></div></nav></header><div class="main"><div class="nav__-dEyW"></div><div class="wrap__VyOVO"><div><h2 id="gatsby-下分页的难点">gatsby 下分页的难点</h2><p>gatsby 生成的都是静态网页，数据是通过 graphql 聚合的，这里查询数据不像传统的关系型数据库那样 直接通过<code>limit</code>, <code>offset</code>来控制分页数据。gatsby 的数据源可能是每个 markdown 经过 nodejs 转换后的纯 json， 再通过 graphql 的接口来查本地的 json 数据，也就是页面加载到浏览器后，不能像传统的发起 ajax 请求，因为没有一个接收分页参数的后端。</p><p>所以只能在每个页面生成之前就提前拿到全局的分页数据，比如 总页数，当前页码，再注入页面，让页面在浏览器加载就可以使用这些数据。</p><p>考虑到 gatsby 生成页面的逻辑是通过在 <code>gatsby-node.js</code>里调用 nodejs 的接口，最典型的就是 <code>createPages</code>, <code>createPage</code>。</p><h2 id="gatsby-node-生成分页列表">gatsby-node 生成分页列表</h2><pre><code class="language-javascript">exports.createPages = async ({ graphql, actions }) =&gt; {
  const { createPage } = actions

  const result = await graphql(
    `
      {
        allMarkdownRemark(
          sort: { fields: [frontmatter___date], order: DESC }
          limit: 1000
        ) {
          edges {
            node {
              fields {
                slug
              }
              frontmatter {
                title
              }
            }
          }
        }
      }
    `
  )

  if (result.errors) {
    throw result.errors
  }

  const posts = result.data.allMarkdownRemark.edges
  const postsPerPage = 10
  const numPages = Math.ceil(posts.length / postsPerPage)

  // save numPages to global data
  fs.writeFileSync(
    path.resolve(__dirname, "src/data/num-pages.js"),
    `export default ${numPages}`
  )

  // create paginated page
  Array.from({ length: numPages }).forEach((_, i) =&gt; {
    createPage({
      path: i === 0 ? `/blog` : `/blog/${i + 1}`,
      component: path.resolve("./src/templates/blog-list.js"),
      context: {
        limit: postsPerPage,
        skip: i * postsPerPage,
        numPages,
        currentPage: i + 1,
      },
    })
  })

  // create each post
  posts.forEach((post, index) =&gt; {
    const previous = index === posts.length - 1 ? null : posts[index + 1].node
    const next = index === 0 ? null : posts[index - 1].node

    createPage({
      path: `/blog${post.node.fields.slug}`,
      component: path.resolve(`./src/templates/blog-post.js`),
      context: {
        slug: post.node.fields.slug,
        previous,
        next,
      },
    })
  })
}
</code></pre><p>上面是完整的在 nodejs 端生成单独分页的列表页和每个子页面的逻辑。</p><p>这里涉及两个模板，一个是每个分页对应的列表页（对应 <code>src/templates/blog-list.js</code>），一个是每个 blog 的详情页(对应 <code>src/templates/blog-post.js</code>).</p><p><code>templates/blog-list</code>的代码如下</p><pre><code class="language-js">import React from "react"
import { graphql } from "gatsby"

import Layout from "components/layout"
import ListItem from "components/list-item"
import Pagination from "components/pagination"

export default class BlogList extends React.Component {
  render() {
    const { data, pageContext } = this.props
    const siteTitle = data.site.siteMetadata.title
    const posts = data.allMarkdownRemark.edges
    const { currentPage, numPages } = pageContext

    return (
      &lt;Layout location={this.props.location} title={siteTitle}&gt;
        {posts.map(({ node }) =&gt; (
          &lt;ListItem node={node} key={node.fields.slug} /&gt;
        ))}

        &lt;Pagination numPages={numPages} currentPage={currentPage} /&gt;
      &lt;/Layout&gt;
    )
  }
}

export const blogListQuery = graphql`
  query blogListQuery($skip: Int!, $limit: Int!) {
    site {
      siteMetadata {
        title
      }
    }

    allMarkdownRemark(
      sort: { fields: [frontmatter___date], order: DESC }
      limit: $limit
      skip: $skip
    ) {
      edges {
        node {
          excerpt
          fields {
            slug
          }
          frontmatter {
            date
            title
            description
            tags
          }
        }
      }
    }
  }
`
</code></pre><p>最终的效果如图： <img src="/assets/images/gatsby-pagination.jpg" alt=""></p></div><div class="pager__T39MM"></div></div></div><script type="__PREACT_CLI_DATA__">%7B%22preRenderData%22:%7B%22url%22:%22/blog/2020-10/gatsby-add-pagination%22,%22date%22:%222020-10-13%22,%22tags%22:%5B%5D,%22content%22:%22%5Cn##%20gatsby%20%E4%B8%8B%E5%88%86%E9%A1%B5%E7%9A%84%E9%9A%BE%E7%82%B9%5Cn%5Cngatsby%20%E7%94%9F%E6%88%90%E7%9A%84%E9%83%BD%E6%98%AF%E9%9D%99%E6%80%81%E7%BD%91%E9%A1%B5%EF%BC%8C%E6%95%B0%E6%8D%AE%E6%98%AF%E9%80%9A%E8%BF%87%20graphql%20%E8%81%9A%E5%90%88%E7%9A%84%EF%BC%8C%E8%BF%99%E9%87%8C%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE%E4%B8%8D%E5%83%8F%E4%BC%A0%E7%BB%9F%E7%9A%84%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E9%82%A3%E6%A0%B7%5Cn%E7%9B%B4%E6%8E%A5%E9%80%9A%E8%BF%87%60limit%60,%20%60offset%60%E6%9D%A5%E6%8E%A7%E5%88%B6%E5%88%86%E9%A1%B5%E6%95%B0%E6%8D%AE%E3%80%82gatsby%20%E7%9A%84%E6%95%B0%E6%8D%AE%E6%BA%90%E5%8F%AF%E8%83%BD%E6%98%AF%E6%AF%8F%E4%B8%AA%20markdown%20%E7%BB%8F%E8%BF%87%20nodejs%20%E8%BD%AC%E6%8D%A2%E5%90%8E%E7%9A%84%E7%BA%AF%20json%EF%BC%8C%5Cn%E5%86%8D%E9%80%9A%E8%BF%87%20graphql%20%E7%9A%84%E6%8E%A5%E5%8F%A3%E6%9D%A5%E6%9F%A5%E6%9C%AC%E5%9C%B0%E7%9A%84%20json%20%E6%95%B0%E6%8D%AE%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF%E9%A1%B5%E9%9D%A2%E5%8A%A0%E8%BD%BD%E5%88%B0%E6%B5%8F%E8%A7%88%E5%99%A8%E5%90%8E%EF%BC%8C%E4%B8%8D%E8%83%BD%E5%83%8F%E4%BC%A0%E7%BB%9F%E7%9A%84%E5%8F%91%E8%B5%B7%20ajax%20%E8%AF%B7%E6%B1%82%EF%BC%8C%E5%9B%A0%E4%B8%BA%E6%B2%A1%E6%9C%89%E4%B8%80%E4%B8%AA%E6%8E%A5%E6%94%B6%E5%88%86%E9%A1%B5%E5%8F%82%E6%95%B0%E7%9A%84%E5%90%8E%E7%AB%AF%E3%80%82%5Cn%5Cn%E6%89%80%E4%BB%A5%E5%8F%AA%E8%83%BD%E5%9C%A8%E6%AF%8F%E4%B8%AA%E9%A1%B5%E9%9D%A2%E7%94%9F%E6%88%90%E4%B9%8B%E5%89%8D%E5%B0%B1%E6%8F%90%E5%89%8D%E6%8B%BF%E5%88%B0%E5%85%A8%E5%B1%80%E7%9A%84%E5%88%86%E9%A1%B5%E6%95%B0%E6%8D%AE%EF%BC%8C%E6%AF%94%E5%A6%82%20%E6%80%BB%E9%A1%B5%E6%95%B0%EF%BC%8C%E5%BD%93%E5%89%8D%E9%A1%B5%E7%A0%81%EF%BC%8C%E5%86%8D%E6%B3%A8%E5%85%A5%E9%A1%B5%E9%9D%A2%EF%BC%8C%E8%AE%A9%E9%A1%B5%E9%9D%A2%E5%9C%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8A%A0%E8%BD%BD%E5%B0%B1%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E8%BF%99%E4%BA%9B%E6%95%B0%E6%8D%AE%E3%80%82%5Cn%5Cn%E8%80%83%E8%99%91%E5%88%B0%20gatsby%20%E7%94%9F%E6%88%90%E9%A1%B5%E9%9D%A2%E7%9A%84%E9%80%BB%E8%BE%91%E6%98%AF%E9%80%9A%E8%BF%87%E5%9C%A8%20%60gatsby-node.js%60%E9%87%8C%E8%B0%83%E7%94%A8%20nodejs%20%E7%9A%84%E6%8E%A5%E5%8F%A3%EF%BC%8C%E6%9C%80%E5%85%B8%E5%9E%8B%E7%9A%84%E5%B0%B1%E6%98%AF%20%60createPages%60,%20%60createPage%60%E3%80%82%5Cn%5Cn##%20gatsby-node%20%E7%94%9F%E6%88%90%E5%88%86%E9%A1%B5%E5%88%97%E8%A1%A8%5Cn%5Cn%60%60%60javascript%5Cnexports.createPages%20=%20async%20(%7B%20graphql,%20actions%20%7D)%20=%3E%20%7B%5Cn%20%20const%20%7B%20createPage%20%7D%20=%20actions%5Cn%5Cn%20%20const%20result%20=%20await%20graphql(%5Cn%20%20%20%20%60%5Cn%20%20%20%20%20%20%7B%5Cn%20%20%20%20%20%20%20%20allMarkdownRemark(%5Cn%20%20%20%20%20%20%20%20%20%20sort:%20%7B%20fields:%20%5Bfrontmatter___date%5D,%20order:%20DESC%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20limit:%201000%5Cn%20%20%20%20%20%20%20%20)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20edges%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20node%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20fields%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20slug%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20frontmatter%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20title%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%7D%5Cn%20%20%20%20%60%5Cn%20%20)%5Cn%5Cn%20%20if%20(result.errors)%20%7B%5Cn%20%20%20%20throw%20result.errors%5Cn%20%20%7D%5Cn%5Cn%20%20const%20posts%20=%20result.data.allMarkdownRemark.edges%5Cn%20%20const%20postsPerPage%20=%2010%5Cn%20%20const%20numPages%20=%20Math.ceil(posts.length%20/%20postsPerPage)%5Cn%5Cn%20%20//%20save%20numPages%20to%20global%20data%5Cn%20%20fs.writeFileSync(%5Cn%20%20%20%20path.resolve(__dirname,%20%5C%22src/data/num-pages.js%5C%22),%5Cn%20%20%20%20%60export%20default%20$%7BnumPages%7D%60%5Cn%20%20)%5Cn%5Cn%20%20//%20create%20paginated%20page%5Cn%20%20Array.from(%7B%20length:%20numPages%20%7D).forEach((_,%20i)%20=%3E%20%7B%5Cn%20%20%20%20createPage(%7B%5Cn%20%20%20%20%20%20path:%20i%20===%200%20?%20%60/blog%60%20:%20%60/blog/$%7Bi%20+%201%7D%60,%5Cn%20%20%20%20%20%20component:%20path.resolve(%5C%22./src/templates/blog-list.js%5C%22),%5Cn%20%20%20%20%20%20context:%20%7B%5Cn%20%20%20%20%20%20%20%20limit:%20postsPerPage,%5Cn%20%20%20%20%20%20%20%20skip:%20i%20*%20postsPerPage,%5Cn%20%20%20%20%20%20%20%20numPages,%5Cn%20%20%20%20%20%20%20%20currentPage:%20i%20+%201,%5Cn%20%20%20%20%20%20%7D,%5Cn%20%20%20%20%7D)%5Cn%20%20%7D)%5Cn%5Cn%20%20//%20create%20each%20post%5Cn%20%20posts.forEach((post,%20index)%20=%3E%20%7B%5Cn%20%20%20%20const%20previous%20=%20index%20===%20posts.length%20-%201%20?%20null%20:%20posts%5Bindex%20+%201%5D.node%5Cn%20%20%20%20const%20next%20=%20index%20===%200%20?%20null%20:%20posts%5Bindex%20-%201%5D.node%5Cn%5Cn%20%20%20%20createPage(%7B%5Cn%20%20%20%20%20%20path:%20%60/blog$%7Bpost.node.fields.slug%7D%60,%5Cn%20%20%20%20%20%20component:%20path.resolve(%60./src/templates/blog-post.js%60),%5Cn%20%20%20%20%20%20context:%20%7B%5Cn%20%20%20%20%20%20%20%20slug:%20post.node.fields.slug,%5Cn%20%20%20%20%20%20%20%20previous,%5Cn%20%20%20%20%20%20%20%20next,%5Cn%20%20%20%20%20%20%7D,%5Cn%20%20%20%20%7D)%5Cn%20%20%7D)%5Cn%7D%5Cn%60%60%60%5Cn%5Cn%E4%B8%8A%E9%9D%A2%E6%98%AF%E5%AE%8C%E6%95%B4%E7%9A%84%E5%9C%A8%20nodejs%20%E7%AB%AF%E7%94%9F%E6%88%90%E5%8D%95%E7%8B%AC%E5%88%86%E9%A1%B5%E7%9A%84%E5%88%97%E8%A1%A8%E9%A1%B5%E5%92%8C%E6%AF%8F%E4%B8%AA%E5%AD%90%E9%A1%B5%E9%9D%A2%E7%9A%84%E9%80%BB%E8%BE%91%E3%80%82%5Cn%5Cn%E8%BF%99%E9%87%8C%E6%B6%89%E5%8F%8A%E4%B8%A4%E4%B8%AA%E6%A8%A1%E6%9D%BF%EF%BC%8C%E4%B8%80%E4%B8%AA%E6%98%AF%E6%AF%8F%E4%B8%AA%E5%88%86%E9%A1%B5%E5%AF%B9%E5%BA%94%E7%9A%84%E5%88%97%E8%A1%A8%E9%A1%B5%EF%BC%88%E5%AF%B9%E5%BA%94%20%60src/templates/blog-list.js%60%EF%BC%89%EF%BC%8C%E4%B8%80%E4%B8%AA%E6%98%AF%E6%AF%8F%E4%B8%AA%20blog%20%E7%9A%84%E8%AF%A6%E6%83%85%E9%A1%B5(%E5%AF%B9%E5%BA%94%20%60src/templates/blog-post.js%60).%5Cn%5Cn%60templates/blog-list%60%E7%9A%84%E4%BB%A3%E7%A0%81%E5%A6%82%E4%B8%8B%5Cn%5Cn%60%60%60js%5Cnimport%20React%20from%20%5C%22react%5C%22%5Cnimport%20%7B%20graphql%20%7D%20from%20%5C%22gatsby%5C%22%5Cn%5Cnimport%20Layout%20from%20%5C%22components/layout%5C%22%5Cnimport%20ListItem%20from%20%5C%22components/list-item%5C%22%5Cnimport%20Pagination%20from%20%5C%22components/pagination%5C%22%5Cn%5Cnexport%20default%20class%20BlogList%20extends%20React.Component%20%7B%5Cn%20%20render()%20%7B%5Cn%20%20%20%20const%20%7B%20data,%20pageContext%20%7D%20=%20this.props%5Cn%20%20%20%20const%20siteTitle%20=%20data.site.siteMetadata.title%5Cn%20%20%20%20const%20posts%20=%20data.allMarkdownRemark.edges%5Cn%20%20%20%20const%20%7B%20currentPage,%20numPages%20%7D%20=%20pageContext%5Cn%5Cn%20%20%20%20return%20(%5Cn%20%20%20%20%20%20%3CLayout%20location=%7Bthis.props.location%7D%20title=%7BsiteTitle%7D%3E%5Cn%20%20%20%20%20%20%20%20%7Bposts.map((%7B%20node%20%7D)%20=%3E%20(%5Cn%20%20%20%20%20%20%20%20%20%20%3CListItem%20node=%7Bnode%7D%20key=%7Bnode.fields.slug%7D%20/%3E%5Cn%20%20%20%20%20%20%20%20))%7D%5Cn%5Cn%20%20%20%20%20%20%20%20%3CPagination%20numPages=%7BnumPages%7D%20currentPage=%7BcurrentPage%7D%20/%3E%5Cn%20%20%20%20%20%20%3C/Layout%3E%5Cn%20%20%20%20)%5Cn%20%20%7D%5Cn%7D%5Cn%5Cnexport%20const%20blogListQuery%20=%20graphql%60%5Cn%20%20query%20blogListQuery($skip:%20Int!,%20$limit:%20Int!)%20%7B%5Cn%20%20%20%20site%20%7B%5Cn%20%20%20%20%20%20siteMetadata%20%7B%5Cn%20%20%20%20%20%20%20%20title%5Cn%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20allMarkdownRemark(%5Cn%20%20%20%20%20%20sort:%20%7B%20fields:%20%5Bfrontmatter___date%5D,%20order:%20DESC%20%7D%5Cn%20%20%20%20%20%20limit:%20$limit%5Cn%20%20%20%20%20%20skip:%20$skip%5Cn%20%20%20%20)%20%7B%5Cn%20%20%20%20%20%20edges%20%7B%5Cn%20%20%20%20%20%20%20%20node%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20excerpt%5Cn%20%20%20%20%20%20%20%20%20%20fields%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20slug%5Cn%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%20%20frontmatter%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20date%5Cn%20%20%20%20%20%20%20%20%20%20%20%20title%5Cn%20%20%20%20%20%20%20%20%20%20%20%20description%5Cn%20%20%20%20%20%20%20%20%20%20%20%20tags%5Cn%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%60%5Cn%60%60%60%5Cn%5Cn%E6%9C%80%E7%BB%88%E7%9A%84%E6%95%88%E6%9E%9C%E5%A6%82%E5%9B%BE%EF%BC%9A%5Cn!%5B%5D(/assets/images/gatsby-pagination.jpg)%5Cn%22%7D%7D</script><script crossorigin="anonymous" src="/bundle.a8314.esm.js" type="module"></script><script nomodule="" src="/polyfills.1cc01.js"></script><script nomodule="" defer="defer" src="/bundle.2bcdb.js"></script></body></html>